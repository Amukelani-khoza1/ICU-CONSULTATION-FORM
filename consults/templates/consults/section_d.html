{% extends "base.html" %}
{% load widget_tweaks %}

{% block content %}
<h2 class="mb-4">Section D: Current Clinical Status</h2>

<form method="post" action="{% url 'consults:section_d' consult.pk %}">
    {% csrf_token %}

    <table class="table table-bordered table-responsive">
        <!-- Airway -->
        <tr>
            <th>Airway</th>
            <td>
                <div class="form-check form-check-inline">
                    {{ form.airway_patent}} <label class="form-label">Patent</Label>
                </div>
                <div class="form-check form-check-inline">
                    {{ form.airway_threatened}} <label class="form-label">Threatened</Label>
                </div>
            </td>
            <td>
                <div class="form-check form-check-inline">
                    <label class="me-2">Intubated?</label>
                    {{ form.intubated }}
                </div>
            </td>
        </tr>

        <!-- Breathing -->
        <tr>
            <th>Breathing</th>
            <td>
                SpO₂: <input type="number" name="breathing_spo2" class="underscore-input" placeholder="__" /> %
                <div class="form-check form-check-inline ms-3">
                    <label class="form-label">Distress:</label>
                    {{ form.breathing_distress }}
                </div>
            </td>
            <td>
                O₂ Device: <input type="text" class="underscore-input" placeholder="__" />
            </td>
        </tr>

        <!-- Circulation -->
        <tr>
            <th>Circulation</th>
            <td>
                BP: <input type="text" class="underscore-input" placeholder="__" /> / <input type="text" class="underscore-input" placeholder="__" /> mmHg
            </td>
            <td>
                <div class="form-check form-check-inline">
                    <label class="form-label">Inotropes?</label>
                    {{ form.circulation_inotropes }}
                </div>
                <div class="form-check form-check-inline ms-3">
                    <label class="form-label">Antihypertensives:</label>
                    {{ form.circulation_anti_hpt }}
                </div>
            </td>
        </tr>

        <!-- Heart -->
        <tr>
            <th>Heart Rate</th>
            <td>
                <input type="text" class="underscore-input" placeholder="__" /> bpm
            </td>
            <td>
                Rhythm: <input type="text" class="underscore-input" placeholder="__" />
            </td>
        </tr>

        <!-- Fluids -->
        <tr>
            <th>Fluids</th>
            <td>
                Fluid Type: {{ form.fluid_type|add_class:"form-select d-inline-block w-auto" }}
            </td>
            <td>
                Urine Output: <input type="text" class="underscore-input" placeholder="__" /> ml/hr
            </td>
        </tr>

        <!-- Temperature -->
        <tr>
            <th>Temperature</th>
            <td>
                <input type="text" class="underscore-input" placeholder="__" /> °C
            </td>
            <td>
                Measures: <input type="text" class="underscore-input" placeholder="__" />
            </td>
        </tr>

        <!-- Neurological -->
        <tr>
            <th>GCS + Neuro</th>
            <td>
                GCS: <input type="text" class="underscore-input" placeholder="__" /> / <input type="text" class="underscore-input" placeholder="__" />
                <div class="form-check form-check-inline ms-3">
                    <label class="form-label">Sedation?</label>
                    {{ form.sedation }}
                </div>
            </td>
            <td>
                <strong>Pupils:</strong><br>
                Left: Size <input type="text" class="underscore-input" placeholder="__" />, Reactivity: <input type="text" class="underscore-input" placeholder="________" /><br>
                Right: Size <input type="text" class="underscore-input" placeholder="__" />, Reactivity: <input type="text" class="underscore-input" placeholder="________" />
            </td>
        </tr>
    </table>

    <div class="d-flex justify-content-between mt-4">
        <a href="{% url 'consults:section_c' consult.pk %}" class="btn btn-secondary">Back</a>
        <button type="submit" class="btn btn-primary">Next</button>
    </div>
</form>

<style>
    .underscore-input {
        border: none;
        border-bottom: 1px solid #000; /* Creates the appearance of an underscore */
        width: 60px; /* Adjust width as needed */
        max-width: 100%; /* Ensures responsiveness */
        outline: none; /* Removes default focus outline */
        text-align: center; /* Centers the text within the input box */
    }
</style>

{% endblock %}
